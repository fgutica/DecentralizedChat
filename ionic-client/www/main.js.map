{"version":3,"sources":["./src/app/_helpers/gun.helper.ts","./src/app/_services/account.service.ts","./node_modules/gun sync","./src/app/conversation/conversation.component.ts","./src/app/conversation/conversation.component.html","./src/app/home/home.component.ts","./src/app/home/home.component.html","./src/environments/environment.ts","./src/app/_models/alert.ts","./src/app/_services/index.ts","./src/app/_components/alert.component.ts","./src/app/_components/alert.component.html","./src/app/_components/index.ts","./src/app/_services/gundb.ts","./src/app/app.component.html","./src/app/app.component.ts","./src/app/_helpers/index.ts","./src/app/app.module.ts","./src/app/_services/alert.service.ts","./src/app/_models/user.ts","./node_modules/@ionic/core/dist/esm lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./src/app/_models/index.ts","./src/app/_helpers/auth.guard.ts","./src/app/app-routing.module.ts","./src/app/home/index.ts","./src/app/chats/chats.component.ts","./src/app/chats/chats.component.html","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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M;;;;;;;;;;;;;ACNhC;AAAA;AAAO,MAAM,IAAI;CAKhB;;;;;;;;;;;;ACLD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AA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","file":"main.js","sourcesContent":["import { Observable, fromEventPattern  } from 'rxjs';\r\nimport { pick }  from 'underscore/underscore-esm';\r\n\r\nexport function on$(node, cleanup = true, opts = {}): Observable<any> {\r\n    return fromEventPattern(\r\n        handler => {\r\n            // there is no way to off() an on() until at least one value is trigerred\r\n            // so that we can access the event listener to off() it\r\n            const signal = { stop: false };\r\n            node.on((data, key, at, ev) => {\r\n                if (signal.stop) {\r\n                    ev.off();\r\n                } else {\r\n                    // modifying data directly does not seem to work...\r\n                    handler(cleanup ? pick(data, (v, k, o) => v !== null && k !== '_') : data);\r\n                }\r\n            }, opts);\r\n            return signal;\r\n        },\r\n        (handler, signal) => { signal.stop = true; }\r\n    );\r\n}\r\n\r\nexport function once$(node): Observable<any> {\r\n    return new Observable(o => node.once(v => {\r\n        o.next(v);\r\n        o.complete();\r\n    }));\r\n}","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { environment } from '@environments/environment';\nimport { User } from '@app/_models';\nimport { GunDB } from '@app/_services';\n\n@Injectable({ providedIn: 'root' })\nexport class AccountService {\n    private userSubject: BehaviorSubject<User>;\n    public user: Observable<User>;\n\n    constructor(\n        private router: Router,\n        private gunDB: GunDB\n    ) {\n        this.userSubject = new BehaviorSubject<User>(JSON.parse(localStorage.getItem('user')));\n        this.user = this.userSubject.asObservable();\n    }\n\n    public get userValue(): User {\n        return this.userSubject.value;\n    }\n\n    login(username, password) {\n        return this.gunDB.authenticate(username, password)\n            .then((user:User) => {\n                this.userSubject.next(user);\n                return user; \n            });\n    }\n\n    logout() {\n        // remove user from local storage and set current user to null\n        localStorage.removeItem('user');\n        this.userSubject.next(null);\n        this.gunDB.logout();\n        this.router.navigate(['/account/login']);\n    }\n\n    register(user: User) {\n        return this.gunDB.createUser(user);\n    }\n\n\n    getCurrentUserProfile() {\n        return this.gunDB.getCurrentUserProfile();\n    }\n}","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"7JE1\";","import { Component, Input, OnInit, SimpleChanges, AfterViewChecked, ViewChild, ElementRef } from '@angular/core';\nimport { Observable, Subscriber, Subscription  } from 'rxjs';\nimport { GunDB } from '@app/_services';\nimport { User } from '@app/_models';\nimport { AccountService } from '@app/_services';\n\n@Component({\n  selector: 'app-conversation',\n  templateUrl: './conversation.component.html',\n  styleUrls: ['./conversation.component.less']\n})\nexport class ConversationComponent implements OnInit, AfterViewChecked  {\n  @ViewChild('scrollBottom') private scrollBottom: ElementRef;\n  public loading: Boolean = false;\n  public messageContent: String = '';\n  public user: User;\n  public conversation: Array<any>;\n  public messagesSubscription: Subscription;\n  @Input() currentConvo: any;\n  constructor(\n    private db: GunDB,\n    private accountService: AccountService,\n  ) { \n    this.user = this.accountService.userValue;\n  }\n\n  ngOnInit(): void {\n\n  }\n\n  ngAfterViewChecked() {        \n    this.scrollToBottom();        \n  } \n\n  scrollToBottom(): void {\n    try {\n      this.scrollBottom.nativeElement.scrollTop = this.scrollBottom.nativeElement.scrollHeight;\n    } catch(err) { }\n  }\n\n  async ngOnChanges(changes: SimpleChanges) {\n    if (changes.currentConvo.currentValue) {\n      const epub = changes.currentConvo.currentValue.epub;\n      this.loading = true;\n      const [msgPathsFrom, msgPathsTo] = await Promise.all([\n        this.db.$once(this.db.messagesFrom(epub)),\n        this.db.$once(this.db.messagesTo(epub)),\n      ]);\n\n      // Create a flattened array of message paths \n      const msgPaths = [].concat.apply([], [\n        ...Object.values(msgPathsFrom), \n        ...Object.values(msgPathsTo)]);\n\n      // Need to load and sort existing messages first\n      this.conversation = await this.loadMessages(msgPaths);\n      this.loading = false;\n\n\n      this.messagesSubscription = new Observable(o => { \n        let stopped = false;\n        this.db.messagesFrom(epub).map().on(async (data, key, at, ev) => {\n          if (stopped) {\n            o.complete()\n            return ev.off()\n        }\n          const res = await this.db.decryptMessage(JSON.parse(data));\n          // Check for duplicate messages just in case\n          if (!this.conversation.some(e => e.uuid === res.uuid)) {\n            o.next(res);\n          }\n        }, {change: true});\n        return () => {\n          stopped = true;\n        }\n      }).subscribe(d => this.conversation.push(d));\n\n      // Subscribe to new messages\n      /* this.db.on$(this.db.messagesFrom(epub).map(),\n        {change: true}).subscribe(async data => {\n          const res = await this.db.decryptMessage(JSON.parse(data));\n          // Check for duplicate messages just in case\n          if (!this.conversation.some(e => e.uuid === res.uuid)) {\n            this.conversation.push(res);\n          }\n        });\n        */\n    }\n  }\n\n  async loadMessages(messages) {\n    const decryptPromises = [];\n    for (let message of messages) {\n      message = JSON.parse(message);\n      if (this.isReceivedMessage(message)) {\n        decryptPromises.push(this.db.decryptMessage(message));\n      } else {\n        decryptPromises.push(this.db.decryptMyOwnMessage(message));\n      }\n    }\n    const final = await Promise.all(decryptPromises);\n    return final.sort((a, b) => a.ts - b.ts);\n  }\n\n  sendMessage() {\n    console.log(this.messageContent);\n    const ts = (new Date()).getTime();\n    if (this.currentConvo) {\n      this.db.sendMessage(this.currentConvo.epub, this.currentConvo.alias, this.messageContent, ts);\n      this.conversation.push({\n          from: this.db.myAlias,\n          ts: ts,\n          message: this.messageContent\n      });\n      this._clearChat();\n    }\n  }\n\n  isReceivedMessage(message) {\n    return this.user.alias !== message.from;\n  }\n\n  private _clearChat() {\n    this.messageContent = '';\n  }\n}\n","<div class=\"selected-user\">\n    <span class=\"name\">{{currentConvo && currentConvo.alias}}</span>\n</div>\n<div class=\"chat-container\">\n    <ul class=\"chat-box chatContainerScroll\" #scrollBottom>\n        <li *ngFor=\"let message of conversation\" [ngClass]=\"{'chat-left': isReceivedMessage(message), 'chat-right': !isReceivedMessage(message)}\">\n            <div *ngIf=\"isReceivedMessage(message)\" class=\"chat-avatar\">\n                <img src=\"https://cdn2.iconfinder.com/data/icons/rcons-user/32/male-shadow-circle-512.png\">\n            </div>\n            <div class=\"chat-text\">\n                {{message.message}}\n                <div class=\"chat-hour\">{{message.ts | date:'shortTime'}}<span class=\"fa fa-check-circle\"></span></div>\n            </div>\n            <div *ngIf=\"!isReceivedMessage(message)\" class=\"chat-avatar\">\n                <img src=\"https://cdn2.iconfinder.com/data/icons/rcons-user/32/male-shadow-circle-512.png\">\n            </div>\n        </li>\n    </ul>\n    <form class=\"form-group mt-3 mb-0\"\n        (ngSubmit)=\"sendMessage()\">\n        <input type=\"text\" [(ngModel)]=\"messageContent\" name=\"messageContent\"\n            class=\"form-control\" placeholder=\"Type your message here...\">\n        <button type=\"submit\">Send</button>\n    </form>\n</div>\n\n\n<!--\n<div *ngIf=\"loading\" class=\"loader\">\n    <p></p>\n    <h4>Loading</h4>\n</div>\n  \n<ul *ngIf=\"!loading\" class=\"chat\">\n    \n    <li *ngFor=\"let message of conversation\" [ngClass]=\"{'you': message.received, 'me': !message.received}\">\n        <div class=\"entete\">\n            <span class=\"status green\"></span>\n            <h2>Vincent</h2>\n            <h3>10:12AM, Today</h3>\n        </div>\n        <div class=\"triangle\"></div>\n        <div class=\"message\">\n            {{message.message}}\n        </div>\n    </li>\n</ul>\n<footer>\n    <textarea [(ngModel)]=\"messageContent\" class=\"form-control\" name=\"messageContent\" placeholder='Enter a message'></textarea>\n    <img src=\"https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_picture.png\" alt=\"\">\n    <img src=\"https://s3-us-west-2.amazonaws.com/s.cdpn.io/1940306/ico_file.png\" alt=\"\">\n    <a (click)=\"sendMessage()\" href=\"#\">Send</a>\n</footer>\n-->","import { Component, OnInit } from '@angular/core';\nimport { User } from '@app/_models';\nimport { AccountService } from '@app/_services';\nimport { GunDB } from '@app/_services';\nimport { on$ } from '@app/_helpers';\n\n@Component({ \n    templateUrl: 'home.component.html',\n    styleUrls: ['./home.component.less']\n})\nexport class HomeComponent {\n    user: User;\n    public epub;\n    public message;\n    public alias;\n    public contacts;\n    loading = false;\n    currentConvo: any;\n\n    constructor(\n        private accountService: AccountService,\n        private db: GunDB\n    ) {\n        this.user = this.accountService.userValue;\n    }\n}","<link href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css\" rel=\"stylesheet\">\n<div class=\"container\">\n\n\n        <div class=\"card\">\n            <!-- Row start -->\n            <div class=\"row no-gutters\">\n                <div class=\"col-xl-4 col-lg-4 col-md-4 col-sm-3 col-3\">\n                    <div class=\"users-container\">\n                        <div class=\"chat-search-box\">\n                            <form class=\"input-group\">\n                                <input type=\"text\" class=\"form-control\" placeholder=\"Search\">\n                                <div class=\"input-group-btn\">\n                                    <button type=\"button\">\n                                        <span class=\"fa fa-search\"></span>\n                                    </button>\n                                </div>\n                            </form>\n                        </div>\n                        <app-chats [(currentConvo)]=\"currentConvo\" (curentConvoChange)=\"currentConvo=$event\"></app-chats>\n                    </div>\n                </div>\n                <div class=\"col-xl-8 col-lg-8 col-md-8 col-sm-9 col-9\">\n                    <app-conversation [(currentConvo)]=\"currentConvo\"></app-conversation>\n                </div>\n            </div>\n            <!-- Row end -->\n        </div>\n    \n</div>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","export class Alert {\n    id: string;\n    type: AlertType;\n    message: string;\n    autoClose: boolean;\n    keepAfterRouteChange: boolean;\n    fade: boolean;\n\n    constructor(init?:Partial<Alert>) {\n        Object.assign(this, init);\n    }\n}\n\nexport enum AlertType {\n    Success,\n    Error,\n    Info,\n    Warning\n}","export * from './account.service';\r\nexport * from './alert.service';\r\nexport * from '../_services/gundb';","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { Router, NavigationStart } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { Alert, AlertType } from '@app/_models';\nimport { AlertService } from '../_services';\n\n@Component({ selector: 'alert', templateUrl: 'alert.component.html' })\nexport class AlertComponent implements OnInit, OnDestroy {\n    @Input() id = 'default-alert';\n    @Input() fade = true;\n\n    alerts: Alert[] = [];\n    alertSubscription: Subscription;\n    routeSubscription: Subscription;\n\n    constructor(private router: Router, private alertService: AlertService) { }\n\n    ngOnInit() {\n        // subscribe to new alert notifications\n        this.alertSubscription = this.alertService.onAlert(this.id)\n            .subscribe(alert => {\n                // clear alerts when an empty alert is received\n                if (!alert.message) {\n                    // filter out alerts without 'keepAfterRouteChange' flag\n                    this.alerts = this.alerts.filter(x => x.keepAfterRouteChange);\n\n                    // remove 'keepAfterRouteChange' flag on the rest\n                    this.alerts.forEach(x => delete x.keepAfterRouteChange);\n                    return;\n                }\n\n                // add alert to array\n                this.alerts.push(alert);\n\n                // auto close alert if required\n                if (alert.autoClose) {\n                    setTimeout(() => this.removeAlert(alert), 3000);\n                }\n           });\n\n        // clear alerts on location change\n        this.routeSubscription = this.router.events.subscribe(event => {\n            if (event instanceof NavigationStart) {\n                this.alertService.clear(this.id);\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        // unsubscribe to avoid memory leaks\n        this.alertSubscription.unsubscribe();\n        this.routeSubscription.unsubscribe();\n    }\n\n    removeAlert(alert: Alert) {\n        // check if already removed to prevent error on auto close\n        if (!this.alerts.includes(alert)) return;\n\n        if (this.fade) {\n            // fade out alert\n            alert.fade = true;\n\n            // remove alert after faded out\n            setTimeout(() => {\n                this.alerts = this.alerts.filter(x => x !== alert);\n            }, 250);\n        } else {\n            // remove alert\n            this.alerts = this.alerts.filter(x => x !== alert);\n        }\n    }\n\n    cssClass(alert: Alert) {\n        if (!alert) return;\n\n        const classes = ['alert', 'alert-dismissable', 'mt-4', 'container'];\n                \n        const alertTypeClass = {\n            [AlertType.Success]: 'alert alert-success',\n            [AlertType.Error]: 'alert alert-danger',\n            [AlertType.Info]: 'alert alert-info',\n            [AlertType.Warning]: 'alert alert-warning'\n        }\n\n        classes.push(alertTypeClass[alert.type]);\n\n        if (alert.fade) {\n            classes.push('fade');\n        }\n\n        return classes.join(' ');\n    }\n}","<div *ngFor=\"let alert of alerts\" class=\"{{cssClass(alert)}}\">\n    <a class=\"close\" (click)=\"removeAlert(alert)\">&times;</a>\n    <span [innerHTML]=\"alert.message\"></span>\n</div>","export * from './alert.component';\n","import { Injectable } from '@angular/core';\r\nimport { Observable, fromEventPattern  } from 'rxjs';\r\nimport { User } from '@app/_models';\r\nimport { pick }  from 'underscore/underscore-esm';\r\nimport { v4 } from 'uuid';\r\nimport * as Gun from 'gun/gun';\r\n\r\nrequire('gun/sea');\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class GunDB {\r\n    readonly gun:any;\r\n    readonly gunUser:any;\r\n    readonly sea:any;\r\n    constructor() {\r\n        this.gun = Gun('http://192.168.0.15:3001/gun');\r\n        this.sea = Gun.SEA;\r\n        this.gunUser = this.gun.user();\r\n        this.gunUser.recall({sessionStorage: true});\r\n    }\r\n\r\n    isLoggedIn() {\r\n        return this.gunUser.is;\r\n    }\r\n\r\n    get myEpub() { return this.gunUser.is.epub; }\r\n    get myAlias() { return this.gunUser.is.alias; }\r\n\r\n    messagesFrom(epub) {\r\n        return this.gun.get('convos').get('to').get(this.myEpub).get('from').get(epub);\r\n    }\r\n\r\n    messagesTo(epub) {\r\n        return this.gunUser.get('sent').get(epub);\r\n    }\r\n\r\n    authenticate(username:String, password:String): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            this.gunUser.auth(username, password, ack => {                \r\n                if (ack.err && !this.gunUser.is) {\r\n                    reject(ack.err);\r\n                } else {\r\n                    resolve(this.gunUser.is);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    createUser(user:User): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            this.gunUser.create(user.alias, user.password, ack => {\r\n                if (ack.err) {\r\n                    reject(ack.err);\r\n                } else {\r\n                    this.gunUser.auth(user.alias, user.password, async ack => {\r\n                        const { alias } = user; // Don't store the password!\r\n                        this.gun.get('users')\r\n                            .get(alias)\r\n                            .put({epub: ack.sea.epub, alias});\r\n\r\n                        resolve(this.gunUser.is);\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    addContact(alias, epub): Promise<any> {\r\n        if (this.isLoggedIn()) {\r\n            const contact = this.gun.get('users').get(alias);\r\n\r\n            return new Promise(resolve => {\r\n                this.gunUser.get('contacts').set(contact, () => resolve(true));\r\n            });\r\n        }\r\n    }\r\n\r\n    $getAllContacts(): Promise<any> {\r\n        if (this.isLoggedIn()) {\r\n            const node = this.gunUser.get('contacts');\r\n            return this.$once(node);\r\n        } else {\r\n            return Promise.reject();\r\n        }\r\n    }\r\n\r\n    getCurrentUserProfile(): Promise<any> {\r\n        if (this.isLoggedIn()) {\r\n            return new Promise(resolve => {\r\n                this.gunUser.get('profile').once(data => {\r\n                    resolve(data);\r\n                });\r\n            });\r\n        } else {\r\n            return Promise.reject();\r\n        }\r\n    } \r\n    \r\n    // Find and subscribe to user\r\n    $findUserByAlias(alias): Promise<any> {\r\n        if (this.isLoggedIn()) {\r\n            return new Promise((resolve, reject) => {\r\n                this.gun.get('users').get(alias).once(d => {\r\n                    d ? resolve(this.cleanup(d)) : reject(d);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    async sendMessage(epub, alias, message, ts) {\r\n        if (this.isLoggedIn()) {\r\n            const secret = await this.sea.secret(epub, this.gunUser._.sea);\r\n            const enc = await this.sea.encrypt(message, secret);\r\n            const encForMe = await this.sea.encrypt(message, this.gunUser._.sea);\r\n            const uuid = v4();\r\n    \r\n            this.gunUser\r\n                .get('sent')\r\n                .get(epub)\r\n                .get(uuid)\r\n                .put(JSON.stringify({\r\n                    from: this.myAlias,\r\n                    epub: this.myEpub,\r\n                    ts: ts,\r\n                    uuid,\r\n                    message: encForMe\r\n                }));\r\n            this.gun\r\n                .get('convos')\r\n                .get('to')\r\n                .get(epub)\r\n                .get('from')\r\n                .get(this.myEpub)\r\n                .get(uuid)\r\n                .put(JSON.stringify({\r\n                    from: this.myAlias,\r\n                    epub: this.myEpub,\r\n                    ts: ts,\r\n                    uuid,\r\n                    message: enc\r\n                }));\r\n        }\r\n    }\r\n\r\n    async decryptMyOwnMessage(messageObj) {\r\n        messageObj.message = await this.sea.decrypt(messageObj.message, this.gunUser._.sea);\r\n        return messageObj;\r\n    }\r\n\r\n    async decryptMessage(messageObj) {\r\n        const secret = await this.sea.secret(messageObj.epub, this.gunUser._.sea);\r\n        messageObj.message = await this.sea.decrypt(messageObj.message, secret);\r\n        return messageObj;\r\n    }\r\n\r\n    onAuth$(): Observable<any> {\r\n        return new Observable(o => this.gun.on('auth', ack => {\r\n            o.next(ack);\r\n            o.complete();\r\n        }));\r\n    }\r\n\r\n    $onAuth(): Promise<any> {\r\n          // Create a promise that rejects in <ms> milliseconds\r\n          let timeout = new Promise((resolve, reject) => {\r\n            let id = setTimeout(() => {\r\n              clearTimeout(id);\r\n              reject('Timed out in '+ 1000 + 'ms.')\r\n            }, 1000)\r\n          });\r\n\r\n        const promise = new Promise(resolve => {\r\n            this.gun.on('auth', ack => {\r\n                if (!ack.err) {\r\n                    localStorage.setItem('user', JSON.stringify({\r\n                        alias: ack.put.alias,\r\n                        epub: ack.sea.epub,\r\n                        pub: ack.sea.pub\r\n                    }));\r\n                    resolve({\r\n                        alias: ack.put.alias,\r\n                        epub: ack.sea.epub,\r\n                        pub: ack.sea.pub\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        return Promise.race([\r\n            promise,\r\n            timeout\r\n          ])\r\n    }\r\n\r\n    on$(node, opts = {}): Observable<any> {\r\n        return new Observable(o => {\r\n            let stopped = false\r\n            node.on((data, key, at, ev) => {\r\n                if (stopped) {\r\n                    o.complete()\r\n                    return ev.off()\r\n                }\r\n                o.next(this.cleanup(data));\r\n            }, opts);\r\n            return () => {\r\n                // Caller unsubscribe\r\n                stopped = true\r\n            }\r\n        });\r\n    }\r\n\r\n    $once(node): Promise<any> {\r\n        return new Promise(resolve => {\r\n            node.once(data => resolve(this.cleanup(data)));\r\n        });\r\n    }\r\n\r\n    once$(node): Observable<any> {\r\n        return new Observable(o => node.once(data => {\r\n            o.next(this.cleanup(data));\r\n            o.complete();\r\n        }));\r\n    }\r\n\r\n    private cleanup(data) {\r\n        return pick(data, (v, k, o) => v !== null && k !== '_');\r\n    }\r\n\r\n    logout() {\r\n        this.gunUser.leave();\r\n    }\r\n}","<!-- nav -->\n<nav class=\"navbar navbar-expand navbar-dark bg-dark\" *ngIf=\"user\">\n  <div class=\"navbar-nav\">\n      <a class=\"nav-item nav-link\" routerLink=\"/\" routerLinkActive=\"active\" [routerLinkActiveOptions]=\"{exact: true}\">Home</a>\n      <a class=\"nav-item nav-link\" routerLink=\"/contacts\" routerLinkActive=\"active\">Contacts</a>\n      <a class=\"nav-item nav-link\" (click)=\"logout()\">Logout</a>\n  </div>\n</nav>\n\n<!-- main app container -->\n<div *ngIf=\"!loading\" class=\"app-container\" >\n  <alert></alert>\n  <router-outlet></router-outlet>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { User } from './_models';\nimport { GunDB } from './_services';\nimport { AccountService } from './_services';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  user: User;\n  loading = false;\n  constructor(\n      public accountService: AccountService,\n      private db: GunDB\n  ) { this.accountService.user.subscribe(x => this.user = x);}\n\n  async ngOnInit() {\n      if (this.user && !this.db.isLoggedIn()) {\n          this.loading = true;\n          await this.db.$onAuth();\n          this.loading = false;\n      }\n      // In case of refresh, need to wait for authentication\n      // to occurr again automatically since user.recall({sessionStorage: true}) was used\n  }\n\n  logout() {\n      this.accountService.logout();\n  }\n}\n","export * from './auth.guard';\nexport * from './gun.helper';","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { GunDB } from './_services';\nimport { AlertComponent } from './_components';\nimport { HomeComponent } from './home';\nimport { ChatsComponent } from './chats/chats.component';\nimport { ConversationComponent } from './conversation/conversation.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    AlertComponent,\n    HomeComponent,\n    ChatsComponent ,\n    ConversationComponent,   \n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    ReactiveFormsModule,\n    FormsModule,\n    IonicModule.forRoot()\n  ],\n  providers: [\n    GunDB\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { Alert, AlertType } from '@app/_models';\n\n@Injectable({ providedIn: 'root' })\nexport class AlertService {\n    private subject = new Subject<Alert>();\n    private defaultId = 'default-alert';\n\n    // enable subscribing to alerts observable\n    onAlert(id = this.defaultId): Observable<Alert> {\n        return this.subject.asObservable().pipe(filter(x => x && x.id === id));\n    }\n\n    // convenience methods\n    success(message: string, options?: any) {\n        this.alert(new Alert({ ...options, type: AlertType.Success, message }));\n    }\n\n    error(message: string, options?: any) {\n        this.alert(new Alert({ ...options, type: AlertType.Error, message }));\n    }\n\n    info(message: string, options?: any) {\n        this.alert(new Alert({ ...options, type: AlertType.Info, message }));\n    }\n\n    warn(message: string, options?: any) {\n        this.alert(new Alert({ ...options, type: AlertType.Warning, message }));\n    }\n\n    // main alert method    \n    alert(alert: Alert) {\n        alert.id = alert.id || this.defaultId;\n        this.subject.next(alert);\n    }\n\n    // clear alerts\n    clear(id = this.defaultId) {\n        this.subject.next(new Alert({ id }));\n    }\n}","export class User {\n    epub: string;\n    pub: string;\n    alias: string;\n    password: string;\n}","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t\"dUtr\",\n\t\t\"common\",\n\t\t0\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t\"Q8AI\",\n\t\t\"common\",\n\t\t1\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t\"hgI1\",\n\t\t\"common\",\n\t\t2\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t\"CfoV\",\n\t\t\"common\",\n\t\t3\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t\"Nt02\",\n\t\t\"common\",\n\t\t4\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t\"Q2Bp\",\n\t\t5\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t\"0Pbj\",\n\t\t\"common\",\n\t\t6\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t\"ydQj\",\n\t\t\"common\",\n\t\t7\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t\"4fMi\",\n\t\t\"common\",\n\t\t8\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t\"czK9\",\n\t\t\"common\",\n\t\t9\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t\"/CAe\",\n\t\t10\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t\"WgF3\",\n\t\t\"common\",\n\t\t11\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t\"uQcF\",\n\t\t\"common\",\n\t\t12\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t\"wHD8\",\n\t\t13\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t\"2lz6\",\n\t\t14\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t\"ercB\",\n\t\t\"common\",\n\t\t15\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t\"MGMP\",\n\t\t\"common\",\n\t\t16\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t\"9bur\",\n\t\t\"common\",\n\t\t17\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t\"cABk\",\n\t\t\"common\",\n\t\t18\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t\"kyFE\",\n\t\t\"common\",\n\t\t19\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t\"TvZU\",\n\t\t\"common\",\n\t\t20\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t\"vnES\",\n\t\t\"common\",\n\t\t21\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t\"qCuA\",\n\t\t\"common\",\n\t\t22\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t\"0tOe\",\n\t\t\"common\",\n\t\t23\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t\"h11V\",\n\t\t\"common\",\n\t\t24\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t\"XGij\",\n\t\t\"common\",\n\t\t25\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t\"nYbb\",\n\t\t\"common\",\n\t\t26\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t\"smMY\",\n\t\t\"common\",\n\t\t27\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t\"STjf\",\n\t\t28\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t\"k5eQ\",\n\t\t\"common\",\n\t\t29\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t\"OR5t\",\n\t\t\"common\",\n\t\t30\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t\"fSgp\",\n\t\t\"common\",\n\t\t31\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t\"lfGF\",\n\t\t\"common\",\n\t\t32\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t\"5xYT\",\n\t\t33\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t\"nI0H\",\n\t\t\"common\",\n\t\t34\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t\"NAQR\",\n\t\t35\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t\"knkW\",\n\t\t\"common\",\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t\"TpdJ\",\n\t\t\"common\",\n\t\t37\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t\"ISmu\",\n\t\t\"common\",\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t\"U7LX\",\n\t\t\"common\",\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t\"L3sA\",\n\t\t\"common\",\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t\"IUOf\",\n\t\t\"common\",\n\t\t41\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t\"8Mb5\",\n\t\t42\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"kLfG\";\nmodule.exports = webpackAsyncContext;","export * from './alert';\nexport * from './user';","import { Injectable } from '@angular/core';\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\nimport { AccountService } from '@app/_services';\nimport { GunDB } from '@app/_services';\n\n@Injectable({ providedIn: 'root' })\nexport class AuthGuard implements CanActivate {\n    constructor(\n        private router: Router,\n        private accountService: AccountService,\n        private db: GunDB\n    ) {}\n\n    async canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n        try {\n            const user = this.accountService.userValue || await this.db.$onAuth();\n            if (user) {\n                // authorised so return true\n                return true;\n            }\n        } catch(err) {\n            // not logged in so redirect to login page with the return url\n            this.router.navigate(['/account/login'], { queryParams: { returnUrl: state.url }});\n            return false;\n        }\n\n        // not logged in so redirect to login page with the return url\n        this.router.navigate(['/account/login'], { queryParams: { returnUrl: state.url }});\n        return false;\n    }\n}","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { HomeComponent } from './home';\nimport { AuthGuard } from './_helpers';\n\nconst accountModule = () => import('./account/account.module').then(x => x.AccountModule);\nconst contactsModule = () => import('./contacts/contacts.module').then(x => x.ContactsModule);\n\nconst routes: Routes = [\n    { path: '', component: HomeComponent, canActivate: [AuthGuard] },\n    { path: 'contacts', loadChildren: contactsModule, canActivate: [AuthGuard] },\n    { path: 'account', loadChildren: accountModule },\n\n    // otherwise redirect to home\n    { path: '**', redirectTo: '' }\n];\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes)],\n    exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","export * from './home.component';","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { GunDB } from '@app/_services';\nimport { on$ } from '@app/_helpers';\nimport { Observable } from 'rxjs';\n\n\n@Component({\n  selector: 'app-chats',\n  templateUrl: './chats.component.html',\n  styleUrls: ['./chats.component.less']\n})\nexport class ChatsComponent implements OnInit {\n  @Input() currentConvo: any;\n  @Output() currentConvoChange = new EventEmitter<any>();\n  public chats: Map<any, any>;\n  private contacts$: Observable<any>;\n  public searchString: String;\n  public loading: Boolean = false;\n\n  constructor(\n    private db: GunDB\n  ) { \n    this.chats = new Map();\n  }\n\n  ngOnInit() {\n\n\n    this.db.on$(this.db.gunUser.get('contacts')).subscribe(res => {\n      Object.keys(res).forEach(async path => {\n        const userPath = this.db.gun.get(path);\n        const user = await this.db.$once(userPath);\n\n        this.chats.set(path, { \n          epub: user.epub,\n          alias: user.alias\n        });\n      });\n    });\n\n    // Subscribe to my received messages table\n    /* const contacts = this.db.gunUser\n        .get('contacts');\n    this.contacts$ = on$(contacts, true);\n    this.contacts$.subscribe(this.handleNewContactChat.bind(this)); */\n  }\n\n  async loadConvo(user) {\n\n    this.currentConvoChange.emit(user);\n  }\n\n  handleNewContactChat(data) {\n    for (const [key, value] of Object.entries(data)) {\n      this.db.gunUser.get('contacts').get(key).once(c => {\n        this.chats.set(key, c.epub);\n        this.loading = false;\n      });\n    }\n  }\n}\n","\n<!--<header>\n    <input type=\"text\" placeholder=\"search\">\n</header>\n-->\n\n<ul class=\"users\">\n    <li *ngFor=\"let key of chats.keys()\" (click)=\"loadConvo(chats.get(key))\"\n        class=\"person\" [ngClass]=\"{'active-user': currentConvo && currentConvo.epub === chats.get(key).epub}\">\n        <div class=\"user\">\n            <img src=\"https://cdn2.iconfinder.com/data/icons/rcons-user/32/male-shadow-circle-512.png\">\n        </div>\n        <p class=\"name-time\">\n            <span class=\"name\">{{chats.get(key).alias}}</span>\n            <span class=\"time\">15/02/2019</span>\n        </p>\n    </li>\n</ul>\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}